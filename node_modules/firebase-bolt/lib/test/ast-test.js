"use strict";
exports.__esModule = true;
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var chai_1 = require("chai");
var helper = require("./test-helper");
var bolt = require("../bolt");
var parse = bolt.parse;
var ast = require("../ast");
suite("Abstract Syntax Tree (AST)", function () {
    suite("Left Associative Operators (AND OR)", function () {
        var t = ast.boolean(true);
        var f = ast.boolean(false);
        var v = ast.variable;
        var and = ast.and;
        var or = ast.or;
        var a = v('a');
        var b = v('b');
        var c = v('c');
        var d = v('d');
        var tests = [
            { data: [],
                expect: { and: t, or: f } },
            { data: [t],
                expect: { and: t, or: t } },
            { data: [f],
                expect: { and: f, or: f } },
            { data: [f, t],
                expect: { and: f, or: t } },
            { data: [t, f],
                expect: { and: f, or: t } },
            { data: [t, f, t],
                expect: { and: f, or: t } },
            { data: [f, t, f],
                expect: { and: f, or: t } },
            { data: [a],
                expect: { and: a, or: a } },
            { data: [a, t],
                expect: { and: a, or: t } },
            { data: [a, f],
                expect: { and: f, or: a } },
            { data: [t, a],
                expect: { and: a, or: t } },
            { data: [f, a],
                expect: { and: f, or: a } },
            { data: [t, a, f],
                expect: { and: f, or: t } },
            { data: [f, a, t],
                expect: { and: f, or: t } },
            { data: [a, f, a],
                expect: { and: f, or: ast.or(a, a) } },
            { data: [a, t, a],
                expect: { and: and(a, a), or: t } },
            { data: [and(a, b), and(c, d)],
                expect: { and: and(and(and(a, b), c), d),
                    or: or(and(a, b), and(c, d)) } },
            { data: [or(a, b), or(c, d)],
                expect: { and: and(or(a, b), or(c, d)),
                    or: or(or(or(a, b), c), d) } },
        ];
        helper.dataDrivenTest(tests, function (data, expect) {
            chai_1.assert.deepEqual(ast.andArray(data), expect.and, 'AND');
            chai_1.assert.deepEqual(ast.orArray(data), expect.or, 'OR');
        }, helper.expFormat);
    });
    suite("Flatten", function () {
        var v = ast.variable;
        var and = ast.and;
        var a = v('a');
        var b = v('b');
        var c = v('c');
        var d = v('d');
        var tests = [
            { data: a,
                expect: [a] },
            { data: and(a, b),
                expect: [a, b] },
            { data: and(a, b),
                expect: [a, b] },
            { data: and(and(a, b), c),
                expect: [a, b, c] },
            { data: and(a, and(b, c)),
                expect: [a, b, c] },
            { data: and(and(a, b), and(c, d)),
                expect: [a, b, c, d] },
        ];
        helper.dataDrivenTest(tests, function (data, expect) {
            var result = ast.flatten('&&', data);
            chai_1.assert.deepEqual(result, expect);
        }, helper.expFormat);
    });
    suite("isIdentifierString", function () {
        var tests = [
            [ast.string('hi'), true],
            [ast.string('Hi'), true],
            [ast.string('a'), true],
            [ast.string('A'), true],
            [ast.string('hiThere'), true],
            [ast.string('H123'), true],
            [ast.string('$id'), true],
            [ast.string('a$id'), false],
            [ast.string('a b'), false],
            [ast.string('0H123'), false],
            [ast.boolean(true), false],
            [ast.number(123), false],
            ['hi', false],
        ];
        helper.dataDrivenTest(tests, function (data, expect) {
            var result = ast.isIdentifierStringExp(data);
            chai_1.assert.equal(result, expect);
        }, helper.expFormat);
    });
    suite("Expression decoding.", function () {
        var tests = [
            ["true"],
            ["false"],
            ["1"],
            ["(1)", '1'],
            ["1.1"],
            ["+3", "3"],
            ["-3"],
            ["0x2", "2"],
            ["\"string\"", "'string'"],
            ["'string'"],
            ["'st\\'ring'"],
            ["'st\\ring'"],
            ["'\\u000d'", "'\\r'"],
            ["/pattern/"],
            ["/pattern/i"],
            ["/pat\\/tern/i"],
            ["a"],
            ["a.b"],
            ["a.b.c"],
            ["a['b']", 'a.b'],
            ["a[b]"],
            ["a[b][c]"],
            ["a.b[c]"],
            ["a[b].c"],
            ["(a.b)[c]", "a.b[c]"],
            ["(a(b))[c]", "a(b)[c]"],
            ["a()"],
            ["a()()"],
            ["a.b()"],
            ["a().b"],
            ["a[0]()"],
            ["a()[0]"],
            ["-a"],
            ["--a"],
            ["+a", "a"],
            ["+a +b", "a + b"],
            ["-a -b", "-a - b"],
            ["-a --b", "-a - -b"],
            ["-a ---b", "-a - --b"],
            ["!a"],
            ["!!a"],
            ["!+a", '!a'],
            ["!-a"],
            ["-!a"],
            ["2 * a"],
            ["(2 * a)", '2 * a'],
            ["2 / a"],
            ["a % 2"],
            ["1 + 1"],
            ["a - 1"],
            ["a - -b"],
            ["a + b + c"],
            ["a + (b + c)"],
            ["(a + b) + c", 'a + b + c'],
            ["a + b * c"],
            ["(a + b) * c"],
            ["a < 7"],
            ["a > 7"],
            ["a <= 7"],
            ["a >= 7"],
            ["a == 3"],
            ["a != 0"],
            ["a === 3", "a == 3"],
            ["a !== 0", "a != 0"],
            ["3 * a == b"],
            ["a == 1 && b <= 2"],
            ["a == 1 || b <= 2"],
            ["a && b && c"],
            ["a || b || c"],
            ["a && b || c && d"],
            ["a ? b : c",],
            ["a || b ? c : d"],
            ["(this + ' ').test(/\d+/)"],
        ];
        helper.dataDrivenTest(tests, function (data, expect) {
            // Decode to self by default
            expect = expect || data;
            var result = parse('function f() {return ' + data + ';}');
            var exp = result.functions.f.body;
            var decode = bolt.decodeExpression(exp);
            chai_1.assert.equal(decode, expect);
        });
    });
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvYXN0LXRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7R0FjRztBQUNILDZCQUE0QjtBQUM1QixzQ0FBd0M7QUFFeEMsOEJBQWdDO0FBQ2hDLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7QUFDdkIsNEJBQThCO0FBRTlCLEtBQUssQ0FBQyw0QkFBNEIsRUFBRTtJQUNsQyxLQUFLLENBQUMscUNBQXFDLEVBQUU7UUFDM0MsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMxQixJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzNCLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxRQUFRLENBQUM7UUFDckIsSUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQztRQUNsQixJQUFJLEVBQUUsR0FBRyxHQUFHLENBQUMsRUFBRSxDQUFDO1FBQ2hCLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNmLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNmLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNmLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUVmLElBQUksS0FBSyxHQUFHO1lBQ1YsRUFBRSxJQUFJLEVBQUUsRUFBRTtnQkFDUixNQUFNLEVBQUUsRUFBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUMsRUFBRTtZQUMzQixFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDVCxNQUFNLEVBQUUsRUFBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUMsRUFBRTtZQUMzQixFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDVCxNQUFNLEVBQUUsRUFBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUMsRUFBRTtZQUMzQixFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ1osTUFBTSxFQUFFLEVBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFDLEVBQUU7WUFDM0IsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNaLE1BQU0sRUFBRSxFQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBQyxFQUFFO1lBQzNCLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ2YsTUFBTSxFQUFFLEVBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFDLEVBQUU7WUFDM0IsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDZixNQUFNLEVBQUUsRUFBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUMsRUFBRTtZQUMzQixFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDVCxNQUFNLEVBQUUsRUFBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUMsRUFBRTtZQUMzQixFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ1osTUFBTSxFQUFFLEVBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFDLEVBQUU7WUFDM0IsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNaLE1BQU0sRUFBRSxFQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBQyxFQUFFO1lBQzNCLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDWixNQUFNLEVBQUUsRUFBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUMsRUFBRTtZQUMzQixFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ1osTUFBTSxFQUFFLEVBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFDLEVBQUU7WUFDM0IsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDZixNQUFNLEVBQUUsRUFBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUMsRUFBRTtZQUMzQixFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNmLE1BQU0sRUFBRSxFQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBQyxFQUFFO1lBQzNCLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ2YsTUFBTSxFQUFFLEVBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUMsRUFBRTtZQUN0QyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNmLE1BQU0sRUFBRSxFQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUMsRUFBRTtZQUNuQyxFQUFFLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDNUIsTUFBTSxFQUFFLEVBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMs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QUFRLENBQUU7WUFDdkIsQ0FBRSxTQUFTLEVBQUUsUUFBUSxDQUFFO1lBQ3ZCLENBQUUsWUFBWSxDQUFFO1lBQ2hCLENBQUUsa0JBQWtCLENBQUU7WUFDdEIsQ0FBRSxrQkFBa0IsQ0FBRTtZQUN0QixDQUFFLGFBQWEsQ0FBRTtZQUNqQixDQUFFLGFBQWEsQ0FBRTtZQUNqQixDQUFFLGtCQUFrQixDQUFFO1lBQ3RCLENBQUUsV0FBVyxFQUFJO1lBQ2pCLENBQUUsZ0JBQWdCLENBQUU7WUFDcEIsQ0FBRSwwQkFBMEIsQ0FBRTtTQUMvQixDQUFDO1FBRUYsTUFBTSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsVUFBUyxJQUFZLEVBQUUsTUFBYztZQUNoRSw0QkFBNEI7WUFDNUIsTUFBTSxHQUFHLE1BQU0sSUFBSSxJQUFJLENBQUM7WUFDeEIsSUFBSSxNQUFNLEdBQUcsS0FBSyxDQUFDLHVCQUF1QixHQUFHLElBQUksR0FBRyxJQUFJLENBQUMsQ0FBQztZQUMxRCxJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7WUFDbEMsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3hDLGFBQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQy9CLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsImZpbGUiOiJ0ZXN0L2FzdC10ZXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnY2hhaSc7XG5pbXBvcnQgKiBhcyBoZWxwZXIgZnJvbSAnLi90ZXN0LWhlbHBlcic7XG5cbmltcG9ydCAqIGFzIGJvbHQgZnJvbSAnLi4vYm9sdCc7XG5sZXQgcGFyc2UgPSBib2x0LnBhcnNlO1xuaW1wb3J0ICogYXMgYXN0IGZyb20gJy4uL2FzdCc7XG5cbnN1aXRlKFwiQWJzdHJhY3QgU3ludGF4IFRyZWUgKEFTVClcIiwgZnVuY3Rpb24oKSB7XG4gIHN1aXRlKFwiTGVmdCBBc3NvY2lhdGl2ZSBPcGVyYXRvcnMgKEFORCBPUilcIiwgZnVuY3Rpb24oKSB7XG4gICAgdmFyIHQgPSBhc3QuYm9vbGVhbih0cnVlKTtcbiAgICB2YXIgZiA9IGFzdC5ib29sZWFuKGZhbHNlKTtcbiAgICB2YXIgdiA9IGFzdC52YXJpYWJsZTtcbiAgICB2YXIgYW5kID0gYXN0LmFuZDtcbiAgICB2YXIgb3IgPSBhc3Qub3I7XG4gICAgdmFyIGEgPSB2KCdhJyk7XG4gICAgdmFyIGIgPSB2KCdiJyk7XG4gICAgdmFyIGMgPSB2KCdjJyk7XG4gICAgdmFyIGQgPSB2KCdkJyk7XG5cbiAgICB2YXIgdGVzdHMgPSBbXG4gICAgICB7IGRhdGE6IFtdLFxuICAgICAgICBleHBlY3Q6IHthbmQ6IHQsIG9yOiBmfSB9LFxuICAgICAgeyBkYXRhOiBbdF0sXG4gICAgICAgIGV4cGVjdDoge2FuZDogdCwgb3I6IHR9IH0sXG4gICAgICB7IGRhdGE6IFtmXSxcbiAgICAgICAgZXhwZWN0OiB7YW5kOiBmLCBvcjogZn0gfSxcbiAgICAgIHsgZGF0YTogW2YsIHRdLFxuICAgICAgICBleHBlY3Q6IHthbmQ6IGYsIG9yOiB0fSB9LFxuICAgICAgeyBkYXRhOiBbdCwgZl0sXG4gICAgICAgIGV4cGVjdDoge2FuZDogZiwgb3I6IHR9IH0sXG4gICAgICB7IGRhdGE6IFt0LCBmLCB0XSxcbiAgICAgICAgZXhwZWN0OiB7YW5kOiBmLCBvcjogdH0gfSxcbiAgICAgIHsgZGF0YTogW2YsIHQsIGZdLFxuICAgICAgICBleHBlY3Q6IHthbmQ6IGYsIG9yOiB0fSB9LFxuICAgICAgeyBkYXRhOiBbYV0sXG4gICAgICAgIGV4cGVjdDoge2FuZDogYSwgb3I6IGF9IH0sXG4gICAgICB7IGRhdGE6IFthLCB0XSxcbiAgICAgICAgZXhwZWN0OiB7YW5kOiBhLCBvcjogdH0gfSxcbiAgICAgIHsgZGF0YTogW2EsIGZdLFxuICAgICAgICBleHBlY3Q6IHthbmQ6IGYsIG9yOiBhfSB9LFxuICAgICAgeyBkYXRhOiBbdCwgYV0sXG4gICAgICAgIGV4cGVjdDoge2FuZDogYSwgb3I6IHR9IH0sXG4gICAgICB7IGRhdGE6IFtmLCBhXSxcbiAgICAgICAgZXhwZWN0OiB7YW5kOiBmLCBvcjogYX0gfSxcbiAgICAgIHsgZGF0YTogW3QsIGEsIGZdLFxuICAgICAgICBleHBlY3Q6IHthbmQ6IGYsIG9yOiB0fSB9LFxuICAgICAgeyBkYXRhOiBbZiwgYSwgdF0sXG4gICAgICAgIGV4cGVjdDoge2FuZDogZiwgb3I6IHR9IH0sXG4gICAgICB7IGRhdGE6IFthLCBmLCBhXSxcbiAgICAgICAgZXhwZWN0OiB7YW5kOiBmLCBvcjogYXN0Lm9yKGEsIGEpfSB9LFxuICAgICAgeyBkYXRhOiBbYSwgdCwgYV0sXG4gICAgICAgIGV4cGVjdDoge2FuZDogYW5kKGEsIGEpLCBvcjogdH0gfSxcbiAgICAgIHsgZGF0YTogW2FuZChhLCBiKSwgYW5kKGMsIGQpXSxcbiAgICAgICAgZXhwZWN0OiB7YW5kOiBhbmQoYW5kKGFuZChhLCBiKSwgYyksIGQpLFxuICAgICAgICAgICAgICAgICBvcjogb3IoYW5kKGEsIGIpLCBhbmQoYywgZCkpfSB9LFxuICAgICAgeyBkYXRhOiBbb3IoYSwgYiksIG9yKGMsIGQpXSxcbiAgICAgICAgZXhwZWN0OiB7YW5kOiBhbmQob3IoYSwgYiksIG9yKGMsIGQpKSxcbiAgICAgICAgICAgICAgICAgb3I6IG9yKG9yKG9yKGEsIGIpLCBjKSwgZCl9IH0sXG4gICAgXTtcblxuICAgIGhlbHBlci5kYXRhRHJpdmVuVGVzdCh0ZXN0cywgZnVuY3Rpb24oZGF0YTogYXN0LkV4cFtdLCBleHBlY3Q6IGFueSkge1xuICAgICAgYXNzZXJ0LmRlZXBFcXVhbChhc3QuYW5kQXJyYXkoZGF0YSksIGV4cGVjdC5hbmQsICdBTkQnKTtcbiAgICAgIGFzc2VydC5kZWVwRXF1YWwoYXN0Lm9yQXJyYXkoZGF0YSksIGV4cGVjdC5vciwgJ09SJyk7XG4gICAgfSwgaGVscGVyLmV4cEZvcm1hdCk7XG4gIH0pO1xuXG4gIHN1aXRlKFwiRmxhdHRlblwiLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IGFzdC52YXJpYWJsZTtcbiAgICB2YXIgYW5kID0gYXN0LmFuZDtcbiAgICB2YXIgYSA9IHYoJ2EnKTtcbiAgICB2YXIgYiA9IHYoJ2InKTtcbiAgICB2YXIgYyA9IHYoJ2MnKTtcbiAgICB2YXIgZCA9IHYoJ2QnKTtcblxuICAgIHZhciB0ZXN0cyA9IFtcbiAgICAgIHsgZGF0YTogYSxcbiAgICAgICAgZXhwZWN0OiBbYV0gfSxcbiAgICAgIHsgZGF0YTogYW5kKGEsIGIpLFxuICAgICAgICBleHBlY3Q6IFthLCBiXSB9LFxuICAgICAgeyBkYXRhOiBhbmQoYSwgYiksXG4gICAgICAgIGV4cGVjdDogW2EsIGJdIH0sXG4gICAgICB7IGRhdGE6IGFuZChhbmQoYSwgYiksIGMpLFxuICAgICAgICBleHBlY3Q6IFthLCBiLCBjXSB9LFxuICAgICAgeyBkYXRhOiBhbmQoYSwgYW5kKGIsIGMpKSxcbiAgICAgICAgZXhwZWN0OiBbYSwgYiwgY10gfSxcbiAgICAgIHsgZGF0YTogYW5kKGFuZChhLCBiKSwgYW5kKGMsIGQpKSxcbiAgICAgICAgZXhwZWN0OiBbYSwgYiwgYywgZF0gfSxcbiAgICBdO1xuXG4gICAgaGVscGVyLmRhdGFEcml2ZW5UZXN0KHRlc3RzLCBmdW5jdGlvbihkYXRhOiBhc3QuRXhwLCBleHBlY3Q6IGFzdC5FeHBbXSkge1xuICAgICAgdmFyIHJlc3VsdCA9IGFzdC5mbGF0dGVuKCcmJicsIGRhdGEpO1xuICAgICAgYXNzZXJ0LmRlZXBFcXVhbChyZXN1bHQsIGV4cGVjdCk7XG4gICAgfSwgaGVscGVyLmV4cEZvcm1hdCk7XG4gIH0pO1xuXG4gIHN1aXRlKFwiaXNJZGVudGlmaWVyU3RyaW5nXCIsIGZ1bmN0aW9uKCkge1xuICAgIGxldCB0ZXN0cyA9IFtcbiAgICAgIFthc3Quc3RyaW5nKCdoaScpLCB0cnVlXSxcbiAgICAgIFthc3Quc3RyaW5nKCdIaScpLCB0cnVlXSxcbiAgICAgIFthc3Quc3RyaW5nKCdhJyksIHRydWVdLFxuICAgICAgW2FzdC5zdHJpbmcoJ0EnKSwgdHJ1ZV0sXG4gICAgICBbYXN0LnN0cmluZygnaGlUaGVyZScpLCB0cnVlXSxcbiAgICAgIFthc3Quc3RyaW5nKCdIMTIzJyksIHRydWVdLFxuICAgICAgW2FzdC5zdHJpbmcoJyRpZCcpLCB0cnVlXSxcbiAgICAgIFthc3Quc3RyaW5nKCdhJGlkJyksIGZhbHNlXSxcbiAgICAgIFthc3Quc3RyaW5nKCdhIGInKSwgZmFsc2VdLFxuICAgICAgW2FzdC5zdHJpbmcoJzBIMTIzJyksIGZhbHNlXSxcbiAgICAgIFthc3QuYm9vbGVhbih0cnVlKSwgZmFsc2VdLFxuICAgICAgW2FzdC5udW1iZXIoMTIzKSwgZmFsc2VdLFxuICAgICAgWydoaScsIGZhbHNlXSxcbiAgICBdO1xuXG4gICAgaGVscGVyLmRhdGFEcml2ZW5UZXN0KHRlc3RzLCBmdW5jdGlvbihkYXRhOiBhc3QuRXhwLCBleHBlY3Q6IGJvb2xlYW4pIHtcbiAgICAgIHZhciByZXN1bHQgPSBhc3QuaXNJZGVudGlmaWVyU3RyaW5nRXhwKGRhdGEpO1xuICAgICAgYXNzZXJ0LmVxdWFsKHJlc3VsdCwgZXhwZWN0KTtcbiAgICB9LCBoZWxwZXIuZXhwRm9ybWF0KTtcbiAgfSk7XG5cbiAgc3VpdGUoXCJFeHByZXNzaW9uIGRlY29kaW5nLlwiLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGVzdHMgPSBbXG4gICAgICBbIFwidHJ1ZVwiIF0sXG4gICAgICBbIFwiZmFsc2VcIiBdLFxuICAgICAgWyBcIjFcIiBdLFxuICAgICAgWyBcIigxKVwiLCAnMScgXSxcbiAgICAgIFsgXCIxLjFcIiBdLFxuICAgICAgWyBcIiszXCIsIFwiM1wiXSxcbiAgICAgIFsgXCItM1wiIF0sXG4gICAgICBbIFwiMHgyXCIsIFwiMlwiIF0sXG4gICAgICBbIFwiXFxcInN0cmluZ1xcXCJcIiwgXCInc3RyaW5nJ1wiIF0sXG4gICAgICBbIFwiJ3N0cmluZydcIiBdLFxuICAgICAgWyBcIidzdFxcXFwncmluZydcIl0sXG4gICAgICBbIFwiJ3N0XFxcXHJpbmcnXCIgXSxcbiAgICAgIFsgXCInXFxcXHUwMDBkJ1wiLCBcIidcXFxccidcIiBdLFxuICAgICAgWyBcIi9wYXR0ZXJuL1wiIF0sXG4gICAgICBbIFwiL3BhdHRlcm4vaVwiIF0sXG4gICAgICBbIFwiL3BhdFxcXFwvdGVybi9pXCIgXSxcbiAgICAgIFsgXCJhXCIgXSxcbiAgICAgIFsgXCJhLmJcIiBdLFxuICAgICAgWyBcImEuYi5jXCIgXSxcblxuICAgICAgWyBcImFbJ2InXVwiLCAnYS5iJyBdLFxuICAgICAgWyBcImFbYl1cIiBdLFxuICAgICAgWyBcImFbYl1bY11cIiBdLFxuICAgICAgWyBcImEuYltjXVwiIF0sXG4gICAgICBbIFwiYVtiXS5jXCIgXSxcbiAgICAgIFsgXCIoYS5iKVtjXVwiLCBcImEuYltjXVwiIF0sXG4gICAgICBbIFwiKGEoYikpW2NdXCIsIFwiYShiKVtjXVwiIF0sXG5cbiAgICAgIFsgXCJhKClcIiBdLFxuICAgICAgWyBcImEoKSgpXCIgXSxcbiAgICAgIFsgXCJhLmIoKVwiIF0sXG4gICAgICBbIFwiYSgpLmJcIiBdLFxuICAgICAgWyBcImFbMF0oKVwiIF0sXG4gICAgICBbIFwiYSgpWzBdXCIgXSxcblxuICAgICAgWyBcIi1hXCIgXSxcbiAgICAgIFsgXCItLWFcIiBdLFxuICAgICAgWyBcIithXCIsIFwiYVwiXSxcbiAgICAgIFsgXCIrYSArYlwiLCBcImEgKyBiXCIgXSxcbiAgICAgIFsgXCItYSAtYlwiLCBcIi1hIC0gYlwiIF0sXG4gICAgICBbIFwiLWEgLS1iXCIsIFwiLWEgLSAtYlwiIF0sXG4gICAgICBbIFwiLWEgLS0tYlwiLCBcIi1hIC0gLS1iXCIgXSxcbiAgICAgIFsgXCIhYVwiIF0sXG4gICAgICBbIFwiISFhXCIgXSxcbiAgICAgIFsgXCIhK2FcIiwgJyFhJyBdLFxuICAgICAgWyBcIiEtYVwiIF0sXG4gICAgICBbIFwiLSFhXCIgXSxcbiAgICAgIFsgXCIyICogYVwiIF0sXG4gICAgICBbIFwiKDIgKiBhKVwiLCAnMiAqIGEnIF0sXG4gICAgICBbIFwiMiAvIGFcIiBdLFxuICAgICAgWyBcImEgJSAyXCIgXSxcbiAgICAgIFsgXCIxICsgMVwiIF0sXG4gICAgICBbIFwiYSAtIDFcIiBdLFxuICAgICAgWyBcImEgLSAtYlwiIF0sXG4gICAgICBbIFwiYSArIGIgKyBjXCIgXSxcbiAgICAgIFsgXCJhICsgKGIgKyBjKVwiIF0sXG4gICAgICBbIFwiKGEgKyBiKSArIGNcIiwgJ2EgKyBiICsgYycgXSxcbiAgICAgIFsgXCJhICsgYiAqIGNcIiBdLFxuICAgICAgWyBcIihhICsgYikgKiBjXCIgXSxcbiAgICAgIFsgXCJhIDwgN1wiIF0sXG4gICAgICBbIFwiYSA+IDdcIiBdLFxuICAgICAgWyBcImEgPD0gN1wiIF0sXG4gICAgICBbIFwiYSA+PSA3XCIgXSxcbiAgICAgIFsgXCJhID09IDNcIiBdLFxuICAgICAgWyBcImEgIT0gMFwiIF0sXG4gICAgICBbIFwiYSA9PT0gM1wiLCBcImEgPT0gM1wiIF0sXG4gICAgICBbIFwiYSAhPT0gMFwiLCBcImEgIT0gMFwiIF0sXG4gICAgICBbIFwiMyAqIGEgPT0gYlwiIF0sXG4gICAgICBbIFwiYSA9PSAxICYmIGIgPD0gMlwiIF0sXG4gICAgICBbIFwiYSA9PSAxIHx8IGIgPD0gMlwiIF0sXG4gICAgICBbIFwiYSAmJiBiICYmIGNcIiBdLFxuICAgICAgWyBcImEgfHwgYiB8fCBjXCIgXSxcbiAgICAgIFsgXCJhICYmIGIgfHwgYyAmJiBkXCIgXSxcbiAgICAgIFsgXCJhID8gYiA6IGNcIiwgIF0sXG4gICAgICBbIFwiYSB8fCBiID8gYyA6IGRcIiBdLFxuICAgICAgWyBcIih0aGlzICsgJyAnKS50ZXN0KC9cXGQrLylcIiBdLFxuICAgIF07XG5cbiAgICBoZWxwZXIuZGF0YURyaXZlblRlc3QodGVzdHMsIGZ1bmN0aW9uKGRhdGE6IHN0cmluZywgZXhwZWN0OiBzdHJpbmcpIHtcbiAgICAgIC8vIERlY29kZSB0byBzZWxmIGJ5IGRlZmF1bHRcbiAgICAgIGV4cGVjdCA9IGV4cGVjdCB8fCBkYXRhO1xuICAgICAgdmFyIHJlc3VsdCA9IHBhcnNlKCdmdW5jdGlvbiBmKCkge3JldHVybiAnICsgZGF0YSArICc7fScpO1xuICAgICAgdmFyIGV4cCA9IHJlc3VsdC5mdW5jdGlvbnMuZi5ib2R5O1xuICAgICAgdmFyIGRlY29kZSA9IGJvbHQuZGVjb2RlRXhwcmVzc2lvbihleHApO1xuICAgICAgYXNzZXJ0LmVxdWFsKGRlY29kZSwgZXhwZWN0KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdfQ==
